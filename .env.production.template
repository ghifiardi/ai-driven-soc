# =============================================================================
# GATRA SOC Platform - Production Environment Configuration
# =============================================================================
# Copy this file to .env.production and fill in the values
# NEVER commit .env.production to version control
# =============================================================================

# -----------------------------------------------------------------------------
# CORE SETTINGS
# -----------------------------------------------------------------------------
ENVIRONMENT=production
LOG_LEVEL=INFO
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# SECURITY - REQUIRED
# -----------------------------------------------------------------------------
# JWT Secret for authentication (min 32 characters, use: openssl rand -hex 32)
JWT_SECRET=

# Service-to-Service API Key (use: openssl rand -hex 32)
SERVICE_API_KEY=

# GCP Project for Secret Manager (optional - falls back to env vars if not set)
GCP_PROJECT_ID=

# -----------------------------------------------------------------------------
# GOOGLE CLOUD CONFIGURATION
# -----------------------------------------------------------------------------
# Path to service account JSON (mounted in container)
GOOGLE_APPLICATION_CREDENTIALS=/app/Service Account BigQuery/sa-gatra-bigquery.json

# BigQuery Dataset Configuration
BQ_PROJECT_ID=chronicle-dev-2be9
BQ_DATASET_ID=gatra_database

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (for distributed rate limiting)
# -----------------------------------------------------------------------------
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# SERVICE URLS (internal Docker network)
# -----------------------------------------------------------------------------
TAA_SERVICE_URL=http://taa-service:8082
CRA_SERVICE_URL=http://cra-service:8083
LEARNING_SERVICE_URL=http://learning-service:8084

# -----------------------------------------------------------------------------
# RATE LIMITING DEFAULTS
# -----------------------------------------------------------------------------
# These can be overridden per-tenant in the config
DEFAULT_INGEST_EPS=100
DEFAULT_ALERTS_PER_MIN=50

# -----------------------------------------------------------------------------
# CIRCUIT BREAKER CONFIGURATION
# -----------------------------------------------------------------------------
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIMEOUT=30

# -----------------------------------------------------------------------------
# TIMEOUT AND RESILIENCE
# -----------------------------------------------------------------------------
REQUEST_TIMEOUT_SECONDS=30
SHUTDOWN_GRACE_PERIOD=30

# -----------------------------------------------------------------------------
# CRA APPROVAL WORKFLOW (for high-risk containment actions)
# -----------------------------------------------------------------------------
# Set to true to require manual approval for high-risk actions
HIGH_RISK_APPROVAL_REQUIRED=true

# Webhook URL for approval notifications (Slack, Teams, etc.)
APPROVAL_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# OBSERVABILITY (optional integrations)
# -----------------------------------------------------------------------------
# Prometheus metrics endpoint (default: enabled at /metrics)
METRICS_ENABLED=true

# OpenTelemetry configuration (optional)
OTEL_EXPORTER_OTLP_ENDPOINT=
OTEL_SERVICE_NAME=gatra-soc

# -----------------------------------------------------------------------------
# TENANT CONFIGURATION
# -----------------------------------------------------------------------------
MULTITENANT_CONFIG_PATH=/app/config/gatra_multitenant_config.json

# -----------------------------------------------------------------------------
# DEPLOYMENT NOTES
# -----------------------------------------------------------------------------
# 1. Generate secrets before deployment:
#    JWT_SECRET=$(openssl rand -hex 32)
#    SERVICE_API_KEY=$(openssl rand -hex 32)
#
# 2. For GCP Secret Manager, set GCP_PROJECT_ID and ensure
#    the service account has secretmanager.secretAccessor role
#
# 3. In Kubernetes, use Secrets instead of env vars:
#    kubectl create secret generic gatra-secrets \
#      --from-literal=jwt-secret=$JWT_SECRET \
#      --from-literal=service-api-key=$SERVICE_API_KEY
#
# 4. For high availability, deploy multiple instances behind a load balancer
#    with Redis for shared state (rate limiting, circuit breakers)
#
# 5. Monitor /health/ready endpoint for deployment readiness
#    Monitor /health/live endpoint for container liveness
# =============================================================================
